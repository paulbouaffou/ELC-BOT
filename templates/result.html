{% extends "base.html" %}
{% block result %}

<div class="container">
{% if request.method == "POST" %}
<div class="container-1">
  <form method="POST">
  <label for="inputNumber">Nombre d'article(s)</label>

    <input name="limit" type="number" id="inputNumber" placeholder="Impossible de saisir un nombre..." min="1" max="{{number_article}}" disabled>

    <!--<label for="tmodele">Catégorie(s)</label>
    <select id="tmodele" name="templates_modele" required>
      <option value="">Choisissez la catégorie des articles wikipédia à améliorer...</option>
      <option value="">Articles à améliorer: Toutes les catégories</option>
      <option value="">Articles à améliorer: Rédaction</option>
      <option value="">Articles à améliorer: Sources</option>
      <option value="">Articles à améliorer: Promotionnel</option>
      <option value="">Articles à améliorer: Wikification</option>
      <option value="">Articles à améliorer: Orphelin</option>
    </select>-->
   <input type="submit" value="Résultats affichés" disabled>
  </form>
</div>
<br>
  {% if articles %}
    <div id="results-table">
      <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">N°</th>
          <th scope="col">Articles</th>
          <th scope="col">Templates</th>
        </tr>
      </thead>
      <tbody>


          {% if articles|length > 0 %}
          {% for article in articles %}
          <tr>
            <th scope="row">{{loop.index}}</th>
            <td><a href="https://fr.wikipedia.org/wiki/{{article.title}}">{{article.title}}</a></td>
            <td>
              {% for template in article.templates[0:5] %}
                <span class="badge badge-primary">{{template["*"]}}</span>
              {% endfor %}
            </td>
          </tr>
          {% endfor %}
          {% else %}
          <h3>Aucun articles à améliorer dans la base !!!</h3>
          {% endif %}

      </tbody>
     </table>
    <br>
    <hr>
    <br>
    <a href="{{url_for('result')}}" class="btn btn-primary float-right"><i class="fa fa-close"></i> Fermer </a>
    </div>
  </div>
  {% endif %}

{% else %}
<div class="container-1">
  <form method="POST">
  <label for="inputNumber">Nombre d'article(s)</label>

    <input name="limit" type="number" id="inputNumber" placeholder="Saisissez un nombre..." min="1" max="{{number_article}}" required>

    <!--<label for="tmodele">Catégorie(s)</label>
    <select id="tmodele" name="templates_modele" required>
      <option value="">Choisissez la catégorie des articles wikipédia à améliorer...</option>
      <option value="">Articles à améliorer: Toutes les catégories</option>
      <option value="">Articles à améliorer: Rédaction</option>
      <option value="">Articles à améliorer: Sources</option>
      <option value="">Articles à améliorer: Promotionnel</option>
      <option value="">Articles à améliorer: Wikification</option>
      <option value="">Articles à améliorer: Orphelin</option>
    </select>-->
   <input type="submit" value="Afficher les résultats">
  </form>
</div>
<br>

{% endif %}

{% endblock %}

